/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 0.6.5
 *
 */
(function(a){jQuery.fn.extend({slimScrollHorizontal:function(b){var c={wheelStep:20,height:"auto",width:"250px",size:"7px",color:"#000",position:"bottom",distance:"1px",start:"left",opacity:0.4,alwaysVisible:false,disableFadeOut:false,railVisible:false,railColor:"#333",railOpacity:"0.2",railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:false,scroll:0,touchScrollStep:200};var d=a.extend(c,b);this.each(function(){var u,r,j,p,y,n,o,i,k="<div></div>",x=30,q=false;var z=a(this);if(z.parent().hasClass("slimScrollDiv")){if(scroll){s=z.parent().find(".slimScrollBar");e=z.parent().find(".slimScrollRail");t(z.scrollLeft()+parseInt(scroll),false,true)}return}var h=a(k).addClass(d.wrapperClass).css({position:"relative",overflow:"hidden",width:d.width,height:d.height});z.css({overflow:"hidden",width:d.width,height:d.height});var e=a(k).addClass(d.railClass).css({width:"100%",height:d.size,position:"absolute",bottom:0,display:(d.alwaysVisible&&d.railVisible)?"block":"none","border-radius":d.size,background:d.railColor,opacity:d.railOpacity,zIndex:90});var s=a(k).addClass(d.barClass).css({background:d.color,height:d.size,position:"absolute",bottom:0,opacity:d.opacity,display:d.alwaysVisible?"block":"none","border-radius":d.size,BorderRadius:d.size,MozBorderRadius:d.size,WebkitBorderRadius:d.size,zIndex:99});var f=(d.position=="top")?{top:d.distance}:{bottom:d.distance};e.css(f);s.css(f);z.wrap(h);z.parent().append(s);z.parent().append(e);s.draggable({axis:"x",containment:"parent",start:function(){j=true},stop:function(){j=false;l()},drag:function(A){t(0,a(this).position().left,false)}});e.hover(function(){g()},function(){l()});s.hover(function(){r=true},function(){r=false});z.hover(function(){u=true;g();l()},function(){u=false;l()});z.bind("touchstart",function(B,A){if(B.originalEvent.touches.length){y=B.originalEvent.touches[0].pageX}});z.bind("touchmove",function(B){B.originalEvent.preventDefault();if(B.originalEvent.touches.length){var A=(y-B.originalEvent.touches[0].pageX)/d.touchScrollStep;t(A,true)}});var w=function(A){if(!u){return}var A=A||window.event;var B=0;if(A.wheelDelta){B=-A.wheelDelta/120}if(A.detail){B=A.detail/3}t(B,true);if(A.preventDefault&&!q){A.preventDefault()}if(!q){A.returnValue=false}};function t(A,D,B){var F=A;if(s.css("left")=="auto"){s.css("left","0px")}if(D){F=parseInt(s.css("left"))+A*parseInt(d.wheelStep)/100*s.outerWidth();var C=z.outerWidth()-s.outerWidth();F=Math.min(Math.max(F,0),C);s.css({left:F+"px"})}o=parseInt(s.css("left"))/(z.outerWidth()-s.outerWidth());F=o*(z[0].scrollWidth-z.outerWidth());if(B){F=A;var E=F/z[0].scrollWidth*z.outerWidth();s.css({left:E+"px"})}z.scrollLeft(F);g();l()}var v=function(){if(window.addEventListener){this.addEventListener("DOMMouseScroll",w,false);this.addEventListener("mousewheel",w,false)}else{document.attachEvent("onmousewheel",w)}};v();function m(){n=Math.max((z.outerWidth()/z[0].scrollWidth)*z.outerWidth(),x);s.css({width:n+"px"})}m();function g(){m();clearTimeout(p);if(o==~~o){q=d.allowPageScroll;if(i!=o){var A=(~~o==0)?"left":"right";z.trigger("slimscroll",A)}}i=o;if(n>=z.outerWidth()){q=true;return}s.stop(true,true).fadeIn("fast");if(d.railVisible){e.stop(true,true).fadeIn("fast")}}function l(){if(!d.alwaysVisible){p=setTimeout(function(){if(!(d.disableFadeOut&&u)&&!r&&!j){s.fadeOut("slow");e.fadeOut("slow")}},1000)}}if(d.start=="right"){s.css({left:z.outerWidth()-s.outerWidth()});t(0,true)}else{if(typeof d.start=="object"){t(a(d.start).position().left,null,true);if(!d.alwaysVisible){s.hide()}}}});return this}});jQuery.fn.extend({slimscrollHorizontal:jQuery.fn.slimScrollHorizontal})})(jQuery);